<html><head><meta charset="utf-8">
<title>Sankey Diagram</title>
<style>
  #chart {
    height: 500px;
  }

  .node rect {
    cursor: move;
    fill-opacity: .9;
    shape-rendering: crispEdges;
  }

  .node text {
    pointer-events: none;
    text-shadow: 0 1px 0 #fff;
  }

  .link {
    fill: none;
    stroke: #000;
    stroke-opacity: .2;
  }

  .link:hover {
    stroke-opacity: .5;
  }
</style>

</head><body>
  <div id="chart"><svg width="960" height="500"><g transform="translate(1,1)"><g><path class="link" d="M15,44.79759658084635C209.57142857142858,44.79759658084635 209.57142857142858,79.23900699810028 404.14285714285717,79.23900699810028" style="stroke-width: 89.5952;"><title>Nuclear → Thermal generation
840 TWh</title></path><path class="link" d="M419.14285714285717,76.42047105822905C681.0714285714287,76.42047105822905 681.0714285714287,101.83666455099315 943,101.83666455099315" style="stroke-width: 83.9581;"><title>Thermal generation → Losses
787 TWh</title></path><path class="link" d="M149.71428571428572,432.02944269442287C209.57142857142858,432.02944269442287 209.57142857142858,425.9426930187923 269.42857142857144,425.9426930187923" style="stroke-width: 65.2771;"><title>Oil → Liquid
612 TWh</title></path><path class="link" d="M419.14285714285717,146.42708209782032C479,146.42708209782032 479,177.61611856218826 538.8571428571429,177.61611856218826" style="stroke-width: 56.0551;"><title>Thermal generation → Electricity grid
526 TWh</title></path><path class="link" d="M15,430.88419644714696C74.85714285714286,430.88419644714696 74.85714285714286,426.28544041752167 134.71428571428572,426.28544041752167" style="stroke-width: 53.7891;"><title>Oil imports → Oil
504 TWh</title></path><path class="link" d="M284.42857142857144,152.92906400208975C344.28571428571433,152.92906400208975 344.28571428571433,145.37575096605468 404.14285714285717,145.37575096605468" style="stroke-width: 42.6783;"><title>Solid → Thermal generation
400 TWh</title></path><path class="link" d="M553.8571428571429,207.49295151515798C748.4285714285714,207.49295151515798 748.4285714285714,247.46309751494604 943,247.46309751494604" style="stroke-width: 36.4966;"><title>Electricity grid → Industry
342 TWh</title></path><path class="link" d="M15,277.4559272827887C276.92857142857144,277.4559272827887 276.92857142857144,221.07609853897569 538.8571428571429,221.07609853897569" style="stroke-width: 30.8649;"><title>Wind → Electricity grid
289 TWh</title></path><path class="link" d="M149.71428571428572,132.6494985854423C209.57142857142858,132.6494985854423 209.57142857142858,146.54001277075722 269.42857142857144,146.54001277075722" style="stroke-width: 29.9002;"><title>Bio-conversion → Solid
280 TWh</title></path><path class="link" d="M284.42857142857144,432.5020329075452C613.7142857142858,432.5020329075452 613.7142857142858,433.18753861280106 943,433.18753861280106" style="stroke-width: 22.0012;"><title>Liquid → International aviation
206 TWh</title></path><path class="link" d="M15,376.1570512651269C479,376.1570512651269 479,324.34696763442 943,324.34696763442" style="stroke-width: 20.5889;"><title>Pumped heat → Heating and cooling - homes
193 TWh</title></path><path class="link" d="M15,109.3021266214736C74.85714285714286,109.3021266214736 74.85714285714286,124.54113456428274 134.71428571428572,124.54113456428274" style="stroke-width: 19.4139;"><title>UK land based bioenergy → Bio-conversion
182 TWh</title></path><path class="link" d="M284.42857142857144,197.42043691224615C344.28571428571433,197.42043691224615 344.28571428571433,174.81552925333077 404.14285714285717,174.81552925333077" style="stroke-width: 16.2013;"><title>Gas → Thermal generation
152 TWh</title></path><path class="link" d="M284.42857142857144,414.25709389068913C613.7142857142858,414.25709389068913 613.7142857142858,404.94259959594507 943,404.94259959594507" style="stroke-width: 14.4887;"><title>Liquid → Road transport
136 TWh</title></path><path class="link" d="M284.42857142857144,450.36591572106C613.7142857142858,450.36591572106 613.7142857142858,461.05142142631587 943,461.05142142631587" style="stroke-width: 13.7266;"><title>Liquid → International shipping
129 TWh</title></path><path class="link" d="M15,135.66109075816794C74.85714285714286,135.66109075816794 74.85714285714286,140.90009870097708 134.71428571428572,140.90009870097708" style="stroke-width: 13.3041;"><title>Agricultural 'waste' → Bio-conversion
125 TWh</title></path><path class="link" d="M149.71428571428572,230.71113657301C209.57142857142858,230.71113657301 209.57142857142858,204.53218829913877 269.42857142857144,204.53218829913877" style="stroke-width: 13.1145;"><title>Ngas → Gas
123 TWh</title></path><path class="link" d="M284.42857142857144,399.69712035596905C613.7142857142858,399.69712035596905 613.7142857142858,278.48459237026884 943,278.48459237026884" style="stroke-width: 12.9134;"><title>Liquid → Industry
121 TWh</title></path><path class="link" d="M553.8571428571429,231.80647056308382C748.4285714285714,231.80647056308382 748.4285714285714,301.0064885347042 943,301.0064885347042" style="stroke-width: 12.1304;"><title>Electricity grid → Heating and cooling - homes
114 TWh</title></path><path class="link" d="M15,473.5227668996019C74.85714285714286,473.5227668996019 74.85714285714286,458.9240108699766 134.71428571428572,458.9240108699766" style="stroke-width: 11.488;"><title>Oil reserves → Oil
108 TWh</title></path><path class="link" d="M553.8571428571429,161.20611582694985C748.4285714285714,161.20611582694985 748.4285714285714,169.11370512862482 943,169.11370512862482" style="stroke-width: 11.1413;"><title>Electricity grid → Over generation / exports
104 TWh</title></path><path class="link" d="M553.8571428571429,181.36358899468334C748.4285714285714,181.36358899468334 748.4285714285714,209.27117829635827 943,209.27117829635827" style="stroke-width: 9.97242;"><title>Electricity grid → Lighting &amp; appliances - homes
93 TWh</title></path><path class="link" d="M553.8571428571429,171.57708438649303C748.4285714285714,171.57708438649303 748.4285714285714,189.484673688168 943,189.484673688168" style="stroke-width: 9.60059;"><title>Electricity grid → Lighting &amp; appliances - commercial
90 TWh</title></path><path class="link" d="M15,233.2946173887238C74.85714285714286,233.2946173887238 74.85714285714286,228.53951620298187 134.71428571428572,228.53951620298187" style="stroke-width: 8.77128;"><title>Gas reserves → Ngas
82 TWh</title></path><path class="link" d="M149.71428571428572,151.9271559118154C209.57142857142858,151.9271559118154 209.57142857142858,193.64736718267568 269.42857142857144,193.64736718267568" style="stroke-width: 8.65512;"><title>Bio-conversion → Gas
81 TWh</title></path><path class="link" d="M419.14285714285717,178.6853963249676C479,178.6853963249676 479,261.80138819438844 538.8571428571429,261.80138819438844" style="stroke-width: 8.46153;"><title>Thermal generation → District heating
79 TWh</title></path><path class="link" d="M15,156.46287415474268C74.85714285714286,156.46287415474268 74.85714285714286,151.70188209755182 134.71428571428572,151.70188209755182" style="stroke-width: 8.29951;"><title>Other waste → Bio-conversion
78 TWh</title></path><path class="link" d="M149.71428571428572,201.5861612469275C209.57142857142858,201.5861612469275 209.57142857142858,175.2894633468998 269.42857142857144,175.2894633468998" style="stroke-width: 8.06069;"><title>Coal → Solid
76 TWh</title></path><path class="link" d="M15,390.2205584321908C479,390.2205584321908 479,366.3592698708735 943,366.3592698708735" style="stroke-width: 7.53814;"><title>Pumped heat → Heating and cooling - commercial
71 TWh</title></path><path class="link" d="M15,204.25966547717235C74.85714285714286,204.25966547717235 74.85714285714286,200.96719157639174 134.71428571428572,200.96719157639174" style="stroke-width: 6.82275;"><title>Coal reserves → Coal
64 TWh</title></path><path class="link" d="M15,350.6133180765464C74.85714285714286,350.6133180765464 74.85714285714286,325.9706466326542 134.71428571428572,325.9706466326542" style="stroke-width: 6.38926;"><title>Solar → Solar PV
60 TWh</title></path><path class="link" d="M149.71428571428572,325.9706466326542C344.28571428571433,325.9706466326542 344.28571428571433,242.47919083690337 538.8571428571429,242.47919083690337" style="stroke-width: 6.38926;"><title>Solar PV → Electricity grid
60 TWh</title></path><path class="link" d="M553.8571428571429,152.61200514378444C748.4285714285714,152.61200514378444 748.4285714285714,149.70436349734553 943,149.70436349734553" style="stroke-width: 6.04687;"><title>Electricity grid → Losses
57 TWh</title></path><path class="link" d="M15,163.63051734024992C142.21428571428572,163.63051734024992 142.21428571428572,164.5079993923787 269.42857142857144,164.5079993923787" style="stroke-width: 6.03578;"><title>Other waste → Solid
57 TWh</title></path><path class="link" d="M284.42857142857144,208.2613659005987C613.7142857142858,208.2613659005987 613.7142857142858,268.30225863105005 943,268.30225863105005" style="stroke-width: 5.18172;"><title>Gas → Industry
49 TWh</title></path><path class="link" d="M284.42857142857144,176.746916660393C613.7142857142858,176.746916660393 613.7142857142858,226.73609331915367 943,226.73609331915367" style="stroke-width: 4.95741;"><title>Solid → Industry
46 TWh</title></path><path class="link" d="M553.8571428571429,261.16849890606795C748.4285714285714,261.16849890606795 748.4285714285714,309.53478769163826 943,309.53478769163826" style="stroke-width: 4.92616;"><title>District heating → Heating and cooling - homes
46 TWh</title></path><path class="link" d="M553.8571428571429,240.5213245974549C748.4285714285714,240.5213245974549 748.4285714285714,357.99693948997833 943,357.99693948997833" style="stroke-width: 4.35807;"><title>Electricity grid → Heating and cooling - commercial
41 TWh</title></path><path class="link" d="M15,249.85187733458932C74.85714285714286,249.85187733458932 74.85714285714286,235.0967761488474 134.71428571428572,235.0967761488474" style="stroke-width: 4.34324;"><title>Gas imports → Ngas
41 TWh</title></path><path class="link" d="M553.8571428571429,245.5548397167757C748.4285714285714,245.5548397167757 748.4285714285714,393.45352840476454 943,393.45352840476454" style="stroke-width: 4.03157;"><title>Electricity grid → Road transport
38 TWh</title></path><path class="link" d="M15,188.9816770707814C142.21428571428572,188.9816770707814 142.21428571428572,169.39250526997307 269.42857142857144,169.39250526997307" style="stroke-width: 3.73323;"><title>Biomass imports → Solid
35 TWh</title></path><path class="link" d="M15,491.13338458825154C142.21428571428572,491.13338458825154 142.21428571428572,460.44787888299567 269.42857142857144,460.44787888299567" style="stroke-width: 3.73323;"><title>Biofuel imports → Liquid
35 TWh</title></path><path class="link" d="M284.42857142857144,459.00077195207047C613.7142857142858,459.00077195207047 613.7142857142858,479.68627765732634 943,479.68627765732634" style="stroke-width: 3.54316;"><title>Liquid → National navigation
33 TWh</title></path><path class="link" d="M553.8571428571429,187.7972256684222C613.7142857142858,187.7972256684222 613.7142857142858,221.1861348333995 673.5714285714287,221.1861348333995" style="stroke-width: 2.89485;"><title>Electricity grid → H2 conversion
27 TWh</title></path><path class="link" d="M149.71428571428572,116.2668017670843C546.3571428571429,116.2668017670843 546.3571428571429,145.24832585455076 943,145.24832585455076" style="stroke-width: 2.8652;"><title>Bio-conversion → Losses
27 TWh</title></path><path class="link" d="M553.8571428571429,264.83181164942755C748.4285714285714,264.83181164942755 748.4285714285714,361.38996632171677 943,361.38996632171677" style="stroke-width: 2.40047;"><title>District heating → Heating and cooling - commercial
23 TWh</title></path><path class="link" d="M823.2857142857143,260.03826862312394C883.1428571428571,260.03826862312394 883.1428571428571,396.58378911839776 943,396.58378911839776" style="stroke-width: 2.22895;"><title>H2 → Road transport
21 TWh</title></path><path class="link" d="M688.5714285714287,221.51897902724872C748.4285714285716,221.51897902724872 748.4285714285716,260.03826862312394 808.2857142857143,260.03826862312394" style="stroke-width: 2.22895;"><title>H2 conversion → H2
21 TWh</title></path><path class="link" d="M15,354.835282146708C74.85714285714286,354.835282146708 74.85714285714286,343.7059337234574 134.71428571428572,343.7059337234574" style="stroke-width: 2.05466;"><title>Solar → Solar Thermal
19 TWh</title></path><path class="link" d="M149.71428571428572,343.7059337234574C546.3571428571429,343.7059337234574 546.3571428571429,313.02519851600107 943,313.02519851600107" style="stroke-width: 2.05466;"><title>Solar Thermal → Heating and cooling - homes
19 TWh</title></path><path class="link" d="M15,303.90235568449066C276.92857142857144,303.90235568449066 276.92857142857144,237.52252694067764 538.8571428571429,237.52252694067764" style="stroke-width: 2.028;"><title>Wave → Electricity grid
19 TWh</title></path><path class="link" d="M284.42857142857144,461.54342213408523C613.7142857142858,461.54342213408523 613.7142857142858,492.22892783934117 943,492.22892783934117" style="stroke-width: 1.54214;"><title>Liquid → Domestic aviation
14 TWh</title></path><path class="link" d="M15,218.29000814235064C74.85714285714286,218.29000814235064 74.85714285714286,204.99753424157004 134.71428571428572,204.99753424157004" style="stroke-width: 1.23794;"><title>Coal imports → Coal
12 TWh</title></path><path class="link" d="M553.8571428571429,258.13802211915987C748.4285714285714,258.13802211915987 748.4285714285714,271.46051857585945 943,271.46051857585945" style="stroke-width: 1.1348;"><title>District heating → Industry
11 TWh</title></path><path class="link" d="M15,336.91459297223247C276.92857142857144,336.91459297223247 276.92857142857144,246.9240287872276 538.8571428571429,246.9240287872276" style="stroke-width: 1.00819;"><title>Tidal → Electricity grid
9 TWh</title></path><path class="link" d="M553.8571428571429,243.11970658247762C748.4285714285714,243.11970658247762 748.4285714285714,380.5476881954924 943,380.5476881954924" style="stroke-width: 1;"><title>Electricity grid → Rail transport
8 TWh</title></path><path class="link" d="M15,315.29037090466676C276.92857142857144,315.29037090466676 276.92857142857144,238.9105421608538 538.8571428571429,238.9105421608538" style="stroke-width: 1;"><title>Geothermal → Electricity grid
7 TWh</title></path><path class="link" d="M15,326.0374437243174C276.92857142857144,326.0374437243174 276.92857142857144,246.04687953931256 538.8571428571429,246.04687953931256" style="stroke-width: 1;"><title>Hydro → Electricity grid
7 TWh</title></path><path class="link" d="M688.5714285714287,220.07160543697896C815.7857142857143,220.07160543697896 815.7857142857143,153.2101338999536 943,153.2101338999536" style="stroke-width: 1;"><title>H2 conversion → Losses
6 TWh</title></path><path class="link" d="M284.42857142857144,406.77740594020645C613.7142857142858,406.77740594020645 613.7142857142858,381.20239021819594 943,381.20239021819594" style="stroke-width: 1;"><title>Liquid → Rail transport
4 TWh</title></path><path class="link" d="M553.8571428571429,238.10699089203055C748.4285714285714,238.10699089203055 748.4285714285714,344.97078258445174 943,344.97078258445174" style="stroke-width: 1;"><title>Electricity grid → Agriculture
4 TWh</title></path><path class="link" d="M15,176.8817347325644C74.85714285714286,176.8817347325644 74.85714285714286,156.08496174368165 134.71428571428572,156.08496174368165" style="stroke-width: 1;"><title>Marine algae → Bio-conversion
4 TWh</title></path><path class="link" d="M284.42857142857144,406.34792439989764C613.7142857142858,406.34792439989764 613.7142857142858,345.6237779873503 943,345.6237779873503" style="stroke-width: 1;"><title>Liquid → Agriculture
4 TWh</title></path><path class="link" d="M284.42857142857144,210.96401168933477C613.7142857142858,210.96401168933477 613.7142857142858,345.3178663872992 943,345.3178663872992" style="stroke-width: 1;"><title>Gas → Agriculture
2 TWh</title></path><path class="link" d="M284.42857142857144,205.59578576075302C613.7142857142858,205.59578576075302 613.7142857142858,152.80251842589666 943,152.80251842589666" style="stroke-width: 1;"><title>Gas → Losses
1 TWh</title></path><path class="link" d="M284.42857142857144,179.27266063996422C613.7142857142858,179.27266063996422 613.7142857142858,344.6884436704576 943,344.6884436704576" style="stroke-width: 1;"><title>Solid → Agriculture
1 TWh</title></path><path class="link" d="M149.71428571428572,156.28655620815047C209.57142857142858,156.28655620815047 209.57142857142858,393.27228344059984 269.42857142857144,393.27228344059984" style="stroke-width: 1;"><title>Bio-conversion → Liquid
1 TWh</title></path><path class="link" d="M284.42857142857144,211.08267509765307C613.7142857142858,211.08267509765307 613.7142857142858,360.18285280087355 943,360.18285280087355" style="stroke-width: 1;"><title>Gas → Heating and cooling - commercial
0 TWh</title></path></g><g><g class="node" transform="translate(0,129.00906008125452)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="13.304061353826851" width="15" style="fill: rgb(31, 119, 180); stroke: rgb(15, 58, 88);"><title>Agricultural 'waste'
125 TWh</title></rect><text x="21" y="6.652030676913426" dy=".35em" text-anchor="start">Agricultural 'waste'</text></g><g class="node" transform="translate(134.71428571428572,114.83420110450184)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="41.484194229386176" width="15" style="fill: rgb(174, 199, 232); stroke: rgb(85, 98, 114);"><title>Bio-conversion
389 TWh</title></rect><text x="21" y="20.742097114693088" dy=".35em" text-anchor="start">Bio-conversion</text></g><g class="node" transform="translate(269.42857142857144,393.2404443148623)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="69.07404997988174" width="15" style="fill: rgb(255, 127, 14); stroke: rgb(125, 62, 7);"><title>Liquid
648 TWh</title></rect><text x="21" y="34.53702498994087" dy=".35em" text-anchor="start">Liquid</text></g><g class="node" transform="translate(943,59.857603910018014)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="93.68542751565369" width="15" style="fill: rgb(255, 187, 120); stroke: rgb(125, 92, 59);"><title>Losses
878 TWh</title></rect><text x="-6" y="46.84271375782684" dy=".35em" text-anchor="end">Losses</text></g><g class="node" transform="translate(269.42857142857144,131.5899166149817)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="47.72988939709642" width="15" style="fill: rgb(44, 160, 44); stroke: rgb(22, 78, 22);"><title>Solid
447 TWh</title></rect><text x="21" y="23.86494469854821" dy=".35em" text-anchor="start">Solid</text></g><g class="node" transform="translate(269.42857142857144,189.31980601207812)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="21.769748896663955" width="15" style="fill: rgb(152, 223, 138); stroke: rgb(74, 109, 68);"><title>Gas
204 TWh</title></rect><text x="21" y="10.884874448331978" dy=".35em" text-anchor="start">Gas</text></g><g class="node" transform="translate(0,489.2667691765031)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="3.7332308234968594" width="15" style="fill: rgb(214, 39, 40); stroke: rgb(105, 19, 20);"><title>Biofuel imports
35 TWh</title></rect><text x="21" y="1.8666154117484297" dy=".35em" text-anchor="start">Biofuel imports</text></g><g class="node" transform="translate(0,187.11506165903296)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="3.7332308234968594" width="15" style="fill: rgb(255, 152, 150); stroke: rgb(125, 74, 73);"><title>Biomass imports
35 TWh</title></rect><text x="21" y="1.8666154117484297" dy=".35em" text-anchor="start">Biomass imports</text></g><g class="node" transform="translate(0,217.67103847181485)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="1.2379393410715587" width="15" style="fill: rgb(148, 103, 189); stroke: rgb(73, 50, 93);"><title>Coal imports
12 TWh</title></rect><text x="21" y="0.6189696705357793" dy=".35em" text-anchor="start">Coal imports</text></g><g class="node" transform="translate(134.71428571428572,197.5558185817492)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="8.060685330356604" width="15" style="fill: rgb(148, 103, 189); stroke: rgb(73, 50, 93);"><title>Coal
76 TWh</title></rect><text x="21" y="4.030342665178302" dy=".35em" text-anchor="start">Coal</text></g><g class="node" transform="translate(0,200.8482924825298)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="6.822745989285046" width="15" style="fill: rgb(148, 103, 189); stroke: rgb(73, 50, 93);"><title>Coal reserves
64 TWh</title></rect><text x="21" y="3.411372994642523" dy=".35em" text-anchor="start">Coal reserves</text></g><g class="node" transform="translate(538.8571428571429,257.57062436585727)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="8.461527657062353" width="15" style="fill: rgb(197, 176, 213); stroke: rgb(97, 86, 104);"><title>District heating
79 TWh</title></rect><text x="-6" y="4.230763828531177" dy=".35em" text-anchor="end">District heating</text></g><g class="node" transform="translate(943,224.25738804795847)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="60.68388036341708" width="15" style="fill: rgb(140, 86, 75); stroke: rgb(69, 42, 37);"><title>Industry
569 TWh</title></rect><text x="-6" y="30.34194018170854" dy=".35em" text-anchor="end">Industry</text></g><g class="node" transform="translate(943,355.8179059901721)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="14.310433720103788" width="15" style="fill: rgb(196, 156, 148); stroke: rgb(96, 76, 73);"><title>Heating and cooling - commercial
134 TWh</title></rect><text x="-6" y="7.155216860051894" dy=".35em" text-anchor="end">Heating and cooling - commercial</text></g><g class="node" transform="translate(943,294.9412684113756)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="39.700136550705935" width="15" style="fill: rgb(196, 156, 148); stroke: rgb(96, 76, 73);"><title>Heating and cooling - homes
372 TWh</title></rect><text x="-6" y="19.850068275352967" dy=".35em" text-anchor="end">Heating and cooling - homes</text></g><g class="node" transform="translate(538.8571428571429,149.58856816357215)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="97.98205620228515" width="15" style="fill: rgb(227, 119, 194); stroke: rgb(111, 58, 95);"><title>Electricity grid
919 TWh</title></rect><text x="-6" y="48.991028101142575" dy=".35em" text-anchor="end">Electricity grid</text></g><g class="node" transform="translate(943,163.5430314256717)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="11.141347405906213" width="15" style="fill: rgb(247, 182, 210); stroke: rgb(121, 89, 103);"><title>Over generation / exports
104 TWh</title></rect><text x="-6" y="5.570673702953107" dy=".35em" text-anchor="end">Over generation / exports</text></g><g class="node" transform="translate(673.5714285714287,219.73870791126086)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="2.894853844277279" width="15" style="fill: rgb(127, 127, 127); stroke: rgb(62, 62, 62);"><title>H2 conversion
27 TWh</title></rect><text x="-6" y="1.4474269221386395" dy=".35em" text-anchor="end">H2 conversion</text></g><g class="node" transform="translate(943,391.43774375568296)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="20.74919025325773" width="15" style="fill: rgb(199, 199, 199); stroke: rgb(98, 98, 98);"><title>Road transport
195 TWh</title></rect><text x="-6" y="10.374595126628865" dy=".35em" text-anchor="end">Road transport</text></g><g class="node" transform="translate(943,344.64140496208154)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="1.1765010280905817" width="15" style="fill: rgb(188, 189, 34); stroke: rgb(92, 93, 17);"><title>Agriculture
11 TWh</title></rect><text x="-6" y="0.5882505140452908" dy=".35em" text-anchor="end">Agriculture</text></g><g class="node" transform="translate(943,380.1283397102759)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="1.30940404540707" width="15" style="fill: rgb(219, 219, 141); stroke: rgb(107, 107, 69);"><title>Rail transport
12 TWh</title></rect><text x="-6" y="0.654702022703535" dy=".35em" text-anchor="end">Rail transport</text></g><g class="node" transform="translate(943,184.6843788315779)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="9.60058971318015" width="15" style="fill: rgb(23, 190, 207); stroke: rgb(11, 93, 101);"><title>Lighting &amp; appliances - commercial
90 TWh</title></rect><text x="-6" y="4.800294856590075" dy=".35em" text-anchor="end">Lighting &amp; appliances - commercial</text></g><g class="node" transform="translate(943,204.28496854475804)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="9.97241950320044" width="15" style="fill: rgb(23, 190, 207); stroke: rgb(11, 93, 101);"><title>Lighting &amp; appliances - homes
93 TWh</title></rect><text x="-6" y="4.98620975160022" dy=".35em" text-anchor="end">Lighting &amp; appliances - homes</text></g><g class="node" transform="translate(0,247.68025696456118)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="4.343240740056246" width="15" style="fill: rgb(152, 223, 138); stroke: rgb(74, 109, 68);"><title>Gas imports
41 TWh</title></rect><text x="21" y="2.171620370028123" dy=".35em" text-anchor="start">Gas imports</text></g><g class="node" transform="translate(134.71428571428572,224.15387662714448)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="13.114519891731025" width="15" style="fill: rgb(158, 218, 229); stroke: rgb(77, 107, 112);"><title>Ngas
123 TWh</title></rect><text x="21" y="6.557259945865512" dy=".35em" text-anchor="start">Ngas</text></g><g class="node" transform="translate(0,228.9089778128864)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="8.77127915167478" width="15" style="fill: rgb(152, 223, 138); stroke: rgb(74, 109, 68);"><title>Gas reserves
82 TWh</title></rect><text x="21" y="4.38563957583739" dy=".35em" text-anchor="start">Gas reserves</text></g><g class="node" transform="translate(404.14285714285717,34.44141041725393)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="148.47474973624486" width="15" style="fill: rgb(31, 119, 180); stroke: rgb(15, 58, 88);"><title>Thermal generation
1,392 TWh</title></rect><text x="21" y="74.23737486812243" dy=".35em" text-anchor="start">Thermal generation</text></g><g class="node" transform="translate(0,314.9163545080213)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="0.7480327932909564" width="15" style="fill: rgb(174, 199, 232); stroke: rgb(85, 98, 114);"><title>Geothermal
7 TWh</title></rect><text x="21" y="0.3740163966454782" dy=".35em" text-anchor="start">Geothermal</text></g><g class="node" transform="translate(808.2857142857143,258.9237925585723)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="2.2289521291032535" width="15" style="fill: rgb(127, 127, 127); stroke: rgb(62, 62, 62);"><title>H2
21 TWh</title></rect><text x="-6" y="1.1144760645516267" dy=".35em" text-anchor="end">H2</text></g><g class="node" transform="translate(0,325.6643873013123)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="0.7461128460103009" width="15" style="fill: rgb(255, 127, 14); stroke: rgb(125, 62, 7);"><title>Hydro
7 TWh</title></rect><text x="21" y="0.37305642300515046" dy=".35em" text-anchor="start">Hydro</text></g><g class="node" transform="translate(943,454.18814321666144)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="13.726556419308881" width="15" style="fill: rgb(255, 187, 120); stroke: rgb(125, 92, 59);"><title>International shipping
129 TWh</title></rect><text x="-6" y="6.863278209654441" dy=".35em" text-anchor="end">International shipping</text></g><g class="node" transform="translate(943,491.45785567868234)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="1.5421443213176456" width="15" style="fill: rgb(44, 160, 44); stroke: rgb(22, 78, 22);"><title>Domestic aviation
14 TWh</title></rect><text x="-6" y="0.7710721606588228" dy=".35em" text-anchor="end">Domestic aviation</text></g><g class="node" transform="translate(943,422.1869340089407)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="22.001209207720763" width="15" style="fill: rgb(255, 187, 120); stroke: rgb(125, 92, 59);"><title>International aviation
206 TWh</title></rect><text x="-6" y="11.000604603860381" dy=".35em" text-anchor="end">International aviation</text></g><g class="node" transform="translate(943,477.91469963597035)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="3.5431560427119626" width="15" style="fill: rgb(152, 223, 138); stroke: rgb(74, 109, 68);"><title>National navigation
33 TWh</title></rect><text x="-6" y="1.7715780213559813" dy=".35em" text-anchor="end">National navigation</text></g><g class="node" transform="translate(0,176.64840780609586)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="0.4666538529371074" width="15" style="fill: rgb(214, 39, 40); stroke: rgb(105, 19, 20);"><title>Marine algae
4 TWh</title></rect><text x="21" y="0.2333269264685537" dy=".35em" text-anchor="start">Marine algae</text></g><g class="node" transform="translate(0,0)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="89.5951931616927" width="15" style="fill: rgb(255, 152, 150); stroke: rgb(125, 74, 73);"><title>Nuclear
840 TWh</title></rect><text x="21" y="44.79759658084635" dy=".35em" text-anchor="start">Nuclear</text></g><g class="node" transform="translate(0,403.98962827159323)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="53.789136351107445" width="15" style="fill: rgb(148, 103, 189); stroke: rgb(73, 50, 93);"><title>Oil imports
504 TWh</title></rect><text x="21" y="26.894568175553722" dy=".35em" text-anchor="start">Oil imports</text></g><g class="node" transform="translate(134.71428571428572,399.39087224196794)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="65.2771409049098" width="15" style="fill: rgb(148, 103, 189); stroke: rgb(73, 50, 93);"><title>Oil
612 TWh</title></rect><text x="21" y="32.6385704524549" dy=".35em" text-anchor="start">Oil</text></g><g class="node" transform="translate(0,467.7787646227007)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="11.48800455380235" width="15" style="fill: rgb(148, 103, 189); stroke: rgb(73, 50, 93);"><title>Oil reserves
108 TWh</title></rect><text x="21" y="5.744002276901175" dy=".35em" text-anchor="start">Oil reserves</text></g><g class="node" transform="translate(0,152.31312143508137)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="14.335286371014497" width="15" style="fill: rgb(197, 176, 213); stroke: rgb(97, 86, 104);"><title>Other waste
134 TWh</title></rect><text x="21" y="7.167643185507249" dy=".35em" text-anchor="start">Other waste</text></g><g class="node" transform="translate(0,365.86261393746537)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="28.12701433412785" width="15" style="fill: rgb(140, 86, 75); stroke: rgb(69, 42, 37);"><title>Pumped heat
264 TWh</title></rect><text x="21" y="14.063507167063925" dy=".35em" text-anchor="start">Pumped heat</text></g><g class="node" transform="translate(134.71428571428572,322.77601435325016)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="6.389264558808154" width="15" style="fill: rgb(196, 156, 148); stroke: rgb(96, 76, 73);"><title>Solar PV
60 TWh</title></rect><text x="21" y="3.194632279404077" dy=".35em" text-anchor="start">Solar PV</text></g><g class="node" transform="translate(134.71428571428572,342.67860193269996)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="2.0546635815148573" width="15" style="fill: rgb(196, 156, 148); stroke: rgb(96, 76, 73);"><title>Solar Thermal
19 TWh</title></rect><text x="21" y="1.0273317907574286" dy=".35em" text-anchor="start">Solar Thermal</text></g><g class="node" transform="translate(0,347.41868579714236)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="8.443928140323012" width="15" style="fill: rgb(196, 156, 148); stroke: rgb(96, 76, 73);"><title>Solar
79 TWh</title></rect><text x="21" y="4.221964070161506" dy=".35em" text-anchor="start">Solar</text></g><g class="node" transform="translate(0,336.4105001473226)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="1.0081856498197803" width="15" style="fill: rgb(227, 119, 194); stroke: rgb(111, 58, 95);"><title>Tidal
9 TWh</title></rect><text x="21" y="0.5040928249098902" dy=".35em" text-anchor="start">Tidal</text></g><g class="node" transform="translate(0,99.5951931616927)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="19.41386691956181" width="15" style="fill: rgb(247, 182, 210); stroke: rgb(121, 89, 103);"><title>UK land based bioenergy
182 TWh</title></rect><text x="21" y="9.706933459780904" dy=".35em" text-anchor="start">UK land based bioenergy</text></g><g class="node" transform="translate(0,302.88835686096)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="2.0279976470613086" width="15" style="fill: rgb(127, 127, 127); stroke: rgb(62, 62, 62);"><title>Wave
19 TWh</title></rect><text x="21" y="1.0139988235306543" dy=".35em" text-anchor="start">Wave</text></g><g class="node" transform="translate(0,262.0234977046174)" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><rect height="30.864859156342632" width="15" style="fill: rgb(199, 199, 199); stroke: rgb(98, 98, 98);"><title>Wind
289 TWh</title></rect><text x="21" y="15.432429578171316" dy=".35em" text-anchor="start">Wind</text></g></g></g></svg></div>
  <script src="d3.min.js"></script>
  <script>
    var margin = {
        top: 1,
        right: 1,
        bottom: 6,
        left: 1
      },
      width = 960 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;

    var formatNumber = d3.format(",.0f"),
      format = function(d) {
        return formatNumber(d) + " TWh";
      },
      color = d3.scaleOrdinal(d3.schemeCategory20);

    var svg = d3.select("#chart").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var sankey = d3.sankey()
      .nodeWidth(15)
      .nodePadding(10)
      .size([width, height]);

    var path = sankey.link();

    d3.json("energy.json", function(energy) {

      sankey
        .nodes(energy.nodes)
        .links(energy.links)
        .layout(32);

      var link = svg.append("g").selectAll(".link")
        .data(energy.links)
        .enter().append("path")
        .attr("class", "link")
        .attr("d", path)
        .style("stroke-width", function(d) {
          return Math.max(1, d.dy);
        })
        .sort(function(a, b) {
          return b.dy - a.dy;
        });

      link.append("title")
        .text(function(d) {
          return d.source.name + " → " + d.target.name + "\n" + format(d.value);
        });

      var node = svg.append("g").selectAll(".node")
        .data(energy.nodes)
        .enter().append("g")
        .attr("class", "node")
        .attr("transform", function(d) {
          return "translate(" + d.x + "," + d.y + ")";
        })
        .call(d3.drag()
          .subject(function(d) {
            return d;
          })
          .on("start", function() {
            this.parentNode.appendChild(this);
          })
          .on("drag", dragmove));

      node.append("rect")
        .attr("height", function(d) {
          return d.dy;
        })
        .attr("width", sankey.nodeWidth())
        .style("fill", function(d) {
          return d.color = color(d.name.replace(/ .*/, ""));
        })
        .style("stroke", function(d) {
          return d3.rgb(d.color).darker(2);
        })
        .append("title")
        .text(function(d) {
          return d.name + "\n" + format(d.value);
        });

      node.append("text")
        .attr("x", -6)
        .attr("y", function(d) {
          return d.dy / 2;
        })
        .attr("dy", ".35em")
        .attr("text-anchor", "end")
        .attr("transform", null)
        .text(function(d) {
          return d.name;
        })
        .filter(function(d) {
          return d.x < width / 2;
        })
        .attr("x", 6 + sankey.nodeWidth())
        .attr("text-anchor", "start");

      function dragmove(d) {
        d3.select(this).attr("transform", "translate(" + d.x + "," + (d.y = Math.max(0, Math.min(height - d.dy, d3.event.y))) + ")");
        sankey.relayout();
        link.attr("d", path);
      }
    });
  </script>
</body></html>